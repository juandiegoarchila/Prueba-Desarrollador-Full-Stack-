"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1533],{1533:(N,l,i)=>{i.r(l),i.d(l,{CatalogPageModule:()=>U});var c=i(177),e=i(8974),g=i(9539),p=i(467),u=i(1413),m=i(6977),f=i(5312),t=i(4438),h=i(9567),v=i(6042),C=i(5182),y=i(5567),P=i(1935),$=i(4517),x=i(6071),I=i(8245),j=i(5577);function T(o,r){if(1&o&&(t.j41(0,"span",13),t.EFF(1),t.k0s()),2&o){const n=r.ngIf;t.R7$(),t.JRh(n>0?n:"")}}function O(o,r){if(1&o&&(t.j41(0,"span",14),t.EFF(1),t.k0s()),2&o){const n=r.ngIf;t.R7$(),t.JRh(n>0?n:"")}}function b(o,r){1&o&&(t.j41(0,"div",15),t.nrm(1,"ion-spinner",16),t.j41(2,"p",17),t.EFF(3,"Cargando cat\xe1logo..."),t.k0s()())}function E(o,r){if(1&o){const n=t.RV6();t.j41(0,"ion-col",21)(1,"app-product-card",22),t.bIt("add",function(s){t.eBV(n);const d=t.XpG(3);return t.Njj(d.addToCart(s))}),t.k0s()()}if(2&o){const n=r.$implicit;t.R7$(),t.Y8G("product",n)}}function M(o,r){if(1&o&&(t.j41(0,"ion-grid",19)(1,"ion-row"),t.DNE(2,E,2,1,"ion-col",20),t.k0s()()),2&o){const n=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",n.products)}}function G(o,r){1&o&&t.nrm(0,"app-empty-state",23)}function R(o,r){if(1&o&&(t.j41(0,"div"),t.DNE(1,M,3,1,"ion-grid",18)(2,G,1,0,"ng-template",null,0,t.C5r),t.k0s()),2&o){const n=t.sdS(3),a=t.XpG();t.R7$(),t.Y8G("ngIf",a.products.length>0)("ngIfElse",n)}}let S=(()=>{class o{constructor(n,a,s,d,X,z){this.productService=n,this.cartService=a,this.orderService=s,this.notify=d,this.auth=X,this.nav=z,this.products=[],this.isLoading=!0,this.cartCount$=this.cartService.itemCount$,this.pendingOrders$=this.orderService.pendingCount$,this.destroy$=new u.B}ngOnInit(){this.productService.getProducts().pipe((0,m.Q)(this.destroy$)).subscribe({next:n=>{this.products=n,this.isLoading=!1},error:n=>{f.c.production||console.error("Error cargando productos:",n),this.isLoading=!1,this.notify.showError("Error cargando productos")}})}addToCart(n){this.cartService.addToCart(n),this.notify.showSuccess(`Agregaste ${n.name} al carrito`)}logout(){var n=this;return(0,p.A)(function*(){yield n.auth.logout(),n.notify.showInfo("Has cerrado sesi\xf3n correctamente"),n.nav.navigateRoot("/login")})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(h.b),t.rXU(v.m),t.rXU(C.Q),t.rXU(y.J),t.rXU(P.u),t.rXU($.q9))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-catalog"]],decls:14,vars:8,consts:[["empty",""],["title","Cat\xe1logo"],["routerLink","/orders",1,"notification-btn"],["name","receipt-outline","slot","icon-only"],["class","badge badge-orders",4,"ngIf"],["routerLink","/cart",1,"notification-btn"],["name","cart-outline","slot","icon-only"],["class","badge",4,"ngIf"],[3,"click"],["name","log-out-outline","slot","icon-only"],["color","light",1,"ion-padding"],["class","centered-loader",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-orders"],[1,"badge"],[1,"centered-loader"],["name","crescent","color","primary"],[1,"text-medium","ion-margin-top"],["class","ion-no-padding catalog-grid",4,"ngIf","ngIfElse"],[1,"ion-no-padding","catalog-grid"],["size","12","size-md","6","size-lg","4",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","4"],[3,"add","product"],["title","Sin Productos","description","No hay productos disponibles en este momento.","icon","cube-outline"]],template:function(a,s){1&a&&(t.j41(0,"app-header",1)(1,"ion-button",2),t.nrm(2,"ion-icon",3),t.DNE(3,T,2,1,"span",4),t.nI1(4,"async"),t.k0s(),t.j41(5,"ion-button",5),t.nrm(6,"ion-icon",6),t.DNE(7,O,2,1,"span",7),t.nI1(8,"async"),t.k0s(),t.j41(9,"ion-button",8),t.bIt("click",function(){return s.logout()}),t.nrm(10,"ion-icon",9),t.k0s()(),t.j41(11,"ion-content",10),t.DNE(12,b,4,0,"div",11)(13,R,4,2,"div",12),t.k0s()),2&a&&(t.R7$(3),t.Y8G("ngIf",t.bMT(4,4,s.pendingOrders$)),t.R7$(4),t.Y8G("ngIf",t.bMT(8,6,s.cartCount$)),t.R7$(5),t.Y8G("ngIf",s.isLoading),t.R7$(),t.Y8G("ngIf",!s.isLoading))},dependencies:[c.Sq,c.bT,e.Jm,e.hU,e.W9,e.lO,e.iq,e.ln,e.w2,e.N7,x.V,I.y,j.o,g.Wk,c.Jj],styles:[".notification-btn[_ngcontent-%COMP%]{position:relative}.badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:var(--ion-color-danger);color:#fff;border-radius:50%;width:16px;height:16px;font-size:10px;display:flex;align-items:center;justify-content:center;z-index:10;border:2px solid var(--ion-color-primary)}.badge-orders[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);animation:_ngcontent-%COMP%_pulse-animation 2s infinite}@keyframes _ngcontent-%COMP%_pulse-animation{0%{transform:scale(1)}50%{transform:scale(1.15)}to{transform:scale(1)}}.centered-loader[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}ion-grid.catalog-grid[_ngcontent-%COMP%]{margin:8px auto 16px;max-width:1200px}ion-row[_ngcontent-%COMP%]{margin-left:-12px;margin-right:-12px}ion-col[_ngcontent-%COMP%]{padding:12px}"]})}}return o})();var F=i(3887);let U=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[c.MD,e.bv,F.G,g.iI.forChild([{path:"",component:S}])]})}}return o})()}}]);