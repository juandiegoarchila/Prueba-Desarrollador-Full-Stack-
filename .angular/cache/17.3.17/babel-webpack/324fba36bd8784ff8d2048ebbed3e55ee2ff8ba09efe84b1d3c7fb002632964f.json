{"ast":null,"code":"import { getStars } from '../../shared/utils/rating.util';\nimport { getDiscountPercent } from '../../shared/utils/price.util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../core/services/product.service\";\nimport * as i3 from \"../../core/services/cart.service\";\nimport * as i4 from \"../../core/services/notification.service\";\nimport * as i5 from \"@ionic/angular\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../shared/components/app-header/app-header.component\";\nimport * as i8 from \"../../shared/components/empty-state/empty-state.component\";\nfunction ProductDetailPage_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"ion-spinner\", 6);\n    i0.ɵɵelementStart(2, \"p\", 7);\n    i0.ɵɵtext(3, \"Cargando producto...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailPage_div_3_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" -\", ctx_r1.discountPercent, \"% \");\n  }\n}\nfunction ProductDetailPage_div_3_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind4(2, 1, ctx_r1.product.previousPrice, \"COP\", \"symbol\", \"1.0-0\"), \" \");\n  }\n}\nfunction ProductDetailPage_div_3_div_13_ion_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 26);\n  }\n  if (rf & 2) {\n    const star_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"name\", star_r3);\n  }\n}\nfunction ProductDetailPage_div_3_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, ProductDetailPage_div_3_div_13_ion_icon_1_Template, 1, 1, \"ion-icon\", 24);\n    i0.ɵɵelementStart(2, \"span\", 25);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"number\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.getStars(ctx_r1.product.rating));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(4, 2, ctx_r1.product.rating, \"1.1-1\"));\n  }\n}\nfunction ProductDetailPage_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"ion-card\", 9)(2, \"div\", 10);\n    i0.ɵɵelement(3, \"ion-img\", 11);\n    i0.ɵɵtemplate(4, ProductDetailPage_div_3_div_4_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-card-content\")(6, \"h2\", 13);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 14)(9, \"span\", 15);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, ProductDetailPage_div_3_span_12_Template, 3, 6, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, ProductDetailPage_div_3_div_13_Template, 5, 5, \"div\", 17);\n    i0.ɵɵelementStart(14, \"p\", 18);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"ion-button\", 19);\n    i0.ɵɵlistener(\"click\", function ProductDetailPage_div_3_Template_ion_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.addToCart());\n    });\n    i0.ɵɵelement(17, \"ion-icon\", 20);\n    i0.ɵɵtext(18, \" Agregar al carrito \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r1.product.imageUrl)(\"alt\", ctx_r1.product.name);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.discountPercent);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.product.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(11, 8, ctx_r1.product.price, \"COP\", \"symbol\", \"1.0-0\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.previousPrice);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.rating);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.product.description);\n  }\n}\nfunction ProductDetailPage_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-empty-state\", 27);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ProductDetailPage = /*#__PURE__*/(() => {\n  class ProductDetailPage {\n    constructor(route, productService, cartService, notify, nav) {\n      this.route = route;\n      this.productService = productService;\n      this.cartService = cartService;\n      this.notify = notify;\n      this.nav = nav;\n      this.product = null;\n      this.isLoading = true;\n      this.discountPercent = null;\n      this.getStars = getStars;\n    }\n    ngOnInit() {\n      const productId = Number(this.route.snapshot.paramMap.get('id'));\n      if (!productId) {\n        this.isLoading = false;\n        return;\n      }\n      this.productService.getProductById(productId).subscribe({\n        next: product => {\n          this.product = product;\n          this.discountPercent = product ? getDiscountPercent(product.price, product.previousPrice) : null;\n          this.isLoading = false;\n        },\n        error: () => {\n          this.isLoading = false;\n        }\n      });\n    }\n    addToCart() {\n      if (!this.product) {\n        return;\n      }\n      this.cartService.addToCart(this.product);\n      this.notify.showSuccess(`Agregaste ${this.product.name} al carrito`);\n      this.nav.navigateForward('/cart');\n    }\n    static {\n      this.ɵfac = function ProductDetailPage_Factory(t) {\n        return new (t || ProductDetailPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.CartService), i0.ɵɵdirectiveInject(i4.NotificationService), i0.ɵɵdirectiveInject(i5.NavController));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProductDetailPage,\n        selectors: [[\"app-product-detail\"]],\n        decls: 5,\n        vars: 4,\n        consts: [[\"title\", \"Detalle\", 3, \"backButton\"], [\"color\", \"light\", 1, \"ion-padding\"], [\"class\", \"centered-loader\", 4, \"ngIf\"], [\"class\", \"detail-container\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"centered-loader\"], [\"name\", \"crescent\", \"color\", \"primary\"], [1, \"text-medium\", \"ion-margin-top\"], [1, \"detail-container\"], [1, \"detail-card\"], [1, \"detail-image\"], [3, \"src\", \"alt\"], [\"class\", \"discount-badge\", 4, \"ngIf\"], [1, \"detail-title\"], [1, \"price-row\"], [1, \"current-price\"], [\"class\", \"previous-price\", 4, \"ngIf\"], [\"class\", \"rating-row\", 4, \"ngIf\"], [1, \"detail-description\"], [\"expand\", \"block\", \"shape\", \"round\", \"color\", \"primary\", 1, \"add-btn\", 3, \"click\"], [\"name\", \"cart-outline\", \"slot\", \"start\"], [1, \"discount-badge\"], [1, \"previous-price\"], [1, \"rating-row\"], [\"class\", \"rating-star\", 3, \"name\", 4, \"ngFor\", \"ngForOf\"], [1, \"rating-value\"], [1, \"rating-star\", 3, \"name\"], [\"title\", \"Producto no encontrado\", \"description\", \"No fue posible cargar el detalle del producto.\", \"icon\", \"alert-circle-outline\"]],\n        template: function ProductDetailPage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-header\", 0);\n            i0.ɵɵelementStart(1, \"ion-content\", 1);\n            i0.ɵɵtemplate(2, ProductDetailPage_div_2_Template, 4, 0, \"div\", 2)(3, ProductDetailPage_div_3_Template, 19, 13, \"div\", 3)(4, ProductDetailPage_div_4_Template, 2, 0, \"div\", 4);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"backButton\", true);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.product);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.product);\n          }\n        },\n        dependencies: [i6.NgForOf, i6.NgIf, i5.IonButton, i5.IonCard, i5.IonCardContent, i5.IonContent, i5.IonIcon, i5.IonImg, i5.IonSpinner, i7.AppHeaderComponent, i8.EmptyStateComponent, i6.DecimalPipe, i6.CurrencyPipe],\n        styles: [\".centered-loader[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}.detail-container[_ngcontent-%COMP%]{max-width:720px;margin:0 auto}.detail-card[_ngcontent-%COMP%]{border-radius:18px;overflow:hidden;box-shadow:0 12px 28px #1118271f}.detail-image[_ngcontent-%COMP%]{position:relative;background:#fff;padding:20px;display:flex;align-items:center;justify-content:center;height:300px}.detail-image[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.discount-badge[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;background:var(--ion-color-danger);color:#fff;padding:6px 12px;border-radius:999px;font-weight:700;font-size:.9rem;box-shadow:0 6px 16px #00000026}.detail-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.4rem;color:var(--ion-color-tertiary);font-weight:700}.price-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.current-price[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--ion-color-tertiary)}.previous-price[_ngcontent-%COMP%]{font-size:1rem;color:#7a8699;text-decoration:line-through;text-decoration-thickness:2px}.rating-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:14px}.rating-star[_ngcontent-%COMP%]{font-size:18px;color:#f1c40f}.rating-value[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium);font-weight:600}.detail-description[_ngcontent-%COMP%]{color:var(--ion-color-medium);line-height:1.6;margin-bottom:20px}.add-btn[_ngcontent-%COMP%]{height:48px;font-weight:700;--box-shadow: 0 10px 20px rgba(108, 92, 231, .25)}\"]\n      });\n    }\n  }\n  return ProductDetailPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}