{"ast":null,"code":"import { Observable, from } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, sendPasswordResetEmail } from 'firebase/auth';\nimport { initializeApp } from 'firebase/app';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nexport let FirebaseAuthRepository = /*#__PURE__*/(() => {\n  class FirebaseAuthRepository {\n    constructor() {\n      const app = initializeApp(environment.firebase);\n      this.auth = getAuth(app);\n    }\n    login(email, password) {\n      return from(signInWithEmailAndPassword(this.auth, email, password)).pipe(map(credential => {\n        const user = credential.user;\n        return {\n          uid: user.uid,\n          email: user.email || '',\n          displayName: user.displayName || 'Usuario'\n        };\n      }));\n    }\n    register(name, email, password) {\n      return from(createUserWithEmailAndPassword(this.auth, email, password)).pipe(map(credential => {\n        const user = credential.user;\n        // Ideally update profile with name here, but keeping simple\n        return {\n          uid: user.uid,\n          email: user.email || '',\n          displayName: name\n        };\n      }));\n    }\n    logout() {\n      return signOut(this.auth);\n    }\n    getCurrentUser() {\n      return new Observable(observer => {\n        onAuthStateChanged(this.auth, user => {\n          if (user) {\n            observer.next({\n              uid: user.uid,\n              email: user.email || '',\n              displayName: user.displayName || 'Usuario'\n            });\n          } else {\n            observer.next(null);\n          }\n        });\n      });\n    }\n    resetPassword(email) {\n      return sendPasswordResetEmail(this.auth, email);\n    }\n    static {\n      this.ɵfac = function FirebaseAuthRepository_Factory(t) {\n        return new (t || FirebaseAuthRepository)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: FirebaseAuthRepository,\n        factory: FirebaseAuthRepository.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return FirebaseAuthRepository;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}