{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { getStars } from '../../shared/utils/rating.util';\nimport { getDiscountPercent } from '../../shared/utils/price.util';\nlet ProductDetailPage = class ProductDetailPage {\n  constructor(route, productService, cartService, notify, nav) {\n    this.route = route;\n    this.productService = productService;\n    this.cartService = cartService;\n    this.notify = notify;\n    this.nav = nav;\n    this.product = null;\n    this.relatedProducts = [];\n    this.isLoading = true;\n    this.discountPercent = null;\n    this.selectedImage = null;\n    // Expose cart count for key in template\n    this.cartItemCount$ = this.cartService.itemCount$;\n    this.getStars = getStars;\n  }\n  ngOnInit() {\n    this.route.paramMap.subscribe(params => {\n      const productId = Number(params.get('id'));\n      if (!productId) {\n        this.isLoading = false;\n        return;\n      }\n      this.isLoading = true;\n      this.selectedImage = null;\n      this.productService.getProductById(productId).subscribe({\n        next: product => {\n          this.product = product;\n          this.discountPercent = product ? getDiscountPercent(product.price, product.previousPrice) : null;\n          // Initialize selected image\n          if (this.product && this.product.images?.length) {\n            this.selectedImage = this.product.images[0];\n          } else if (this.product) {\n            this.selectedImage = this.product.imageUrl;\n          }\n          this.isLoading = false;\n          // Load related products\n          if (this.product) {\n            this.productService.getRelatedProducts(this.product.id).subscribe(related => {\n              this.relatedProducts = related;\n            });\n          }\n        },\n        error: () => {\n          this.isLoading = false;\n        }\n      });\n    });\n  }\n  addToCart() {\n    if (!this.product) {\n      return;\n    }\n    this.cartService.addToCart(this.product);\n    this.notify.showSuccess(`Agregaste ${this.product.name} al carrito`);\n    // No navegar al carrito autom√°ticamente para permitir seguir comprando\n  }\n  goBack() {\n    this.nav.back();\n  }\n};\nProductDetailPage = __decorate([Component({\n  selector: 'app-product-detail',\n  templateUrl: './product-detail.page.html',\n  styleUrls: ['./product-detail.page.scss']\n})], ProductDetailPage);\nexport { ProductDetailPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}