{"ast":null,"code":"import { getStars } from '../../shared/utils/rating.util';\nimport { getDiscountPercent } from '../../shared/utils/price.util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../core/services/product.service\";\nimport * as i3 from \"../../core/services/cart.service\";\nimport * as i4 from \"../../core/services/notification.service\";\nimport * as i5 from \"@ionic/angular\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../shared/components/product-card/product-card.component\";\nimport * as i8 from \"../../shared/components/app-header/app-header.component\";\nimport * as i9 from \"../../shared/components/empty-state/empty-state.component\";\nfunction ProductDetailPage_ion_badge_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const count_r1 = ctx.ngIf;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(count_r1);\n  }\n}\nfunction ProductDetailPage_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelement(1, \"ion-spinner\", 13);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Cargando informaci\\u00F3n...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailPage_ion_grid_10_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"-\", ctx_r2.discountPercent, \"%\");\n  }\n}\nfunction ProductDetailPage_ion_grid_10_div_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵlistener(\"click\", function ProductDetailPage_ion_grid_10_div_7_div_1_Template_div_click_0_listener() {\n      const img_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r2.selectedImage = img_r5);\n    });\n    i0.ɵɵelement(1, \"ion-img\", 39);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const img_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"active\", ctx_r2.selectedImage === img_r5);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", img_r5);\n  }\n}\nfunction ProductDetailPage_ion_grid_10_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵtemplate(1, ProductDetailPage_ion_grid_10_div_7_div_1_Template, 2, 3, \"div\", 37);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.product.images);\n  }\n}\nfunction ProductDetailPage_ion_grid_10_div_12_ion_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 44);\n  }\n  if (rf & 2) {\n    const star_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"name\", star_r6);\n  }\n}\nfunction ProductDetailPage_ion_grid_10_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"div\", 41);\n    i0.ɵɵtemplate(2, ProductDetailPage_ion_grid_10_div_12_ion_icon_2_Template, 1, 1, \"ion-icon\", 42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 43);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.getStars(ctx_r2.product.rating));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.product.rating);\n  }\n}\nfunction ProductDetailPage_ion_grid_10_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind4(2, 1, ctx_r2.product.previousPrice, \"COP\", \"symbol-narrow\", \"1.0-0\"), \" \");\n  }\n}\nfunction ProductDetailPage_ion_grid_10_div_28_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r7);\n  }\n}\nfunction ProductDetailPage_ion_grid_10_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"h3\");\n    i0.ɵɵtext(2, \"Caracter\\u00EDsticas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, ProductDetailPage_ion_grid_10_div_28_li_4_Template, 2, 1, \"li\", 47);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.product.features);\n  }\n}\nfunction ProductDetailPage_ion_grid_10_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48)(1, \"h3\");\n    i0.ɵɵtext(2, \"Garant\\u00EDa\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 49);\n    i0.ɵɵelement(4, \"ion-icon\", 50);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.product.warranty, \" \");\n  }\n}\nfunction ProductDetailPage_ion_grid_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-grid\", 14)(1, \"ion-row\")(2, \"ion-col\", 15)(3, \"div\", 16);\n    i0.ɵɵelement(4, \"ion-img\", 17);\n    i0.ɵɵelementStart(5, \"div\", 18);\n    i0.ɵɵtemplate(6, ProductDetailPage_ion_grid_10_span_6_Template, 2, 1, \"span\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, ProductDetailPage_ion_grid_10_div_7_Template, 2, 1, \"div\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-col\", 21)(9, \"div\", 22)(10, \"h1\", 23);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, ProductDetailPage_ion_grid_10_div_12_Template, 5, 2, \"div\", 24);\n    i0.ɵɵelementStart(13, \"div\", 25)(14, \"span\", 26);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, ProductDetailPage_ion_grid_10_span_17_Template, 3, 6, \"span\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 28)(19, \"ion-button\", 29);\n    i0.ɵɵlistener(\"click\", function ProductDetailPage_ion_grid_10_Template_ion_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addToCart());\n    });\n    i0.ɵɵelement(20, \"ion-icon\", 30);\n    i0.ɵɵtext(21, \" Agregar al Carrito \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(22, \"div\", 31);\n    i0.ɵɵelementStart(23, \"div\", 32)(24, \"h3\");\n    i0.ɵɵtext(25, \"Descripci\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"p\");\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(28, ProductDetailPage_ion_grid_10_div_28_Template, 5, 1, \"div\", 33)(29, ProductDetailPage_ion_grid_10_div_29_Template, 6, 1, \"div\", 34);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r2.selectedImage || ctx_r2.product.imageUrl)(\"alt\", ctx_r2.product.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.discountPercent);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.product.images && ctx_r2.product.images.length > 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.product.name);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.product.rating);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(16, 11, ctx_r2.product.price, \"COP\", \"symbol-narrow\", \"1.0-0\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.product.previousPrice);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(ctx_r2.product.description);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.product.features == null ? null : ctx_r2.product.features.length);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.product.warranty);\n  }\n}\nfunction ProductDetailPage_div_11_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 56)(1, \"app-product-card\", 57);\n    i0.ɵɵlistener(\"add\", function ProductDetailPage_div_11_div_5_Template_app_product_card_add_1_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.addToCart($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const rel_r9 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"product\", rel_r9);\n  }\n}\nfunction ProductDetailPage_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 51)(1, \"div\", 52)(2, \"h3\", 53);\n    i0.ɵɵtext(3, \"Otros productos disponibles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 54);\n    i0.ɵɵtemplate(5, ProductDetailPage_div_11_div_5_Template, 2, 1, \"div\", 55);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.relatedProducts);\n  }\n}\nfunction ProductDetailPage_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 58);\n    i0.ɵɵelement(1, \"app-empty-state\", 59);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ProductDetailPage = /*#__PURE__*/(() => {\n  class ProductDetailPage {\n    constructor(route, productService, cartService, notify, nav) {\n      this.route = route;\n      this.productService = productService;\n      this.cartService = cartService;\n      this.notify = notify;\n      this.nav = nav;\n      this.product = null;\n      this.relatedProducts = [];\n      this.isLoading = true;\n      this.discountPercent = null;\n      this.selectedImage = null;\n      // Expose cart count for key in template\n      this.cartItemCount$ = this.cartService.itemCount$;\n      this.getStars = getStars;\n    }\n    ngOnInit() {\n      this.route.paramMap.subscribe(params => {\n        const productId = Number(params.get('id'));\n        if (!productId) {\n          this.isLoading = false;\n          return;\n        }\n        this.isLoading = true;\n        this.selectedImage = null;\n        this.productService.getProductById(productId).subscribe({\n          next: product => {\n            this.product = product;\n            this.discountPercent = product ? getDiscountPercent(product.price, product.previousPrice) : null;\n            // Initialize selected image\n            if (this.product && this.product.images?.length) {\n              this.selectedImage = this.product.images[0];\n            } else if (this.product) {\n              this.selectedImage = this.product.imageUrl;\n            }\n            this.isLoading = false;\n            // Load related products\n            if (this.product) {\n              this.productService.getRelatedProducts(this.product.id).subscribe(related => {\n                this.relatedProducts = related;\n              });\n            }\n          },\n          error: () => {\n            this.isLoading = false;\n          }\n        });\n      });\n    }\n    addToCart(product) {\n      const targetProduct = product || this.product;\n      if (!targetProduct) {\n        return;\n      }\n      this.cartService.addToCart(targetProduct);\n      this.notify.showSuccess(`Agregaste ${targetProduct.name} al carrito`);\n      // No navegar al carrito automáticamente para permitir seguir comprando\n    }\n    goToCatalog() {\n      this.nav.navigateBack('/catalog');\n    }\n    static {\n      this.ɵfac = function ProductDetailPage_Factory(t) {\n        return new (t || ProductDetailPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.CartService), i0.ɵɵdirectiveInject(i4.NotificationService), i0.ɵɵdirectiveInject(i5.NavController));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProductDetailPage,\n        selectors: [[\"app-product-detail\"]],\n        decls: 13,\n        vars: 8,\n        consts: [[\"title\", \"Detalle\", 3, \"backButton\"], [\"routerLink\", \"/cart\", \"fill\", \"clear\", \"color\", \"light\"], [\"slot\", \"icon-only\", \"name\", \"cart-outline\"], [\"class\", \"header-badge\", \"color\", \"danger\", 4, \"ngIf\"], [\"fill\", \"clear\", \"color\", \"light\", 3, \"click\"], [\"name\", \"arrow-back-circle-outline\", \"slot\", \"start\"], [\"color\", \"light\"], [\"class\", \"loading-state\", 4, \"ngIf\"], [\"class\", \"product-container ion-no-padding\", 4, \"ngIf\"], [\"class\", \"related-section\", 4, \"ngIf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [\"color\", \"danger\", 1, \"header-badge\"], [1, \"loading-state\"], [\"name\", \"crescent\", \"color\", \"primary\"], [1, \"product-container\", \"ion-no-padding\"], [\"size\", \"12\", \"size-md\", \"6\", \"size-lg\", \"6\", 1, \"gallery-col\"], [1, \"main-image-wrapper\"], [3, \"src\", \"alt\"], [1, \"badges\"], [\"class\", \"badge discount\", 4, \"ngIf\"], [\"class\", \"gallery-thumbs\", 4, \"ngIf\"], [\"size\", \"12\", \"size-md\", \"6\", \"size-lg\", \"6\", 1, \"info-col\"], [1, \"info-card\"], [1, \"product-title\"], [\"class\", \"rating-row\", 4, \"ngIf\"], [1, \"price-block\"], [1, \"price-current\"], [\"class\", \"price-old\", 4, \"ngIf\"], [1, \"action-block\"], [\"expand\", \"block\", \"shape\", \"round\", \"color\", \"primary\", 1, \"main-btn\", 3, \"click\"], [\"name\", \"cart-outline\", \"slot\", \"start\"], [1, \"divider\"], [1, \"description-block\"], [\"class\", \"specs-block\", 4, \"ngIf\"], [\"class\", \"warranty-block\", 4, \"ngIf\"], [1, \"badge\", \"discount\"], [1, \"gallery-thumbs\"], [\"class\", \"thumb\", 3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"thumb\", 3, \"click\"], [3, \"src\"], [1, \"rating-row\"], [1, \"stars\"], [\"color\", \"warning\", 3, \"name\", 4, \"ngFor\", \"ngForOf\"], [1, \"rating-val\"], [\"color\", \"warning\", 3, \"name\"], [1, \"price-old\"], [1, \"specs-block\"], [4, \"ngFor\", \"ngForOf\"], [1, \"warranty-block\"], [1, \"warranty-text\"], [\"name\", \"shield-checkmark-outline\", 1, \"icon-warranty\"], [1, \"related-section\"], [1, \"product-container\"], [1, \"related-title\"], [1, \"related-scroll-container\"], [\"class\", \"related-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"related-item\"], [3, \"add\", \"product\"], [1, \"empty-state\"], [\"title\", \"Producto no encontrado\", \"description\", \"No pudimos encontrar el producto que buscas.\", \"icon\", \"alert-circle-outline\"]],\n        template: function ProductDetailPage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"app-header\", 0)(1, \"ion-button\", 1);\n            i0.ɵɵelement(2, \"ion-icon\", 2);\n            i0.ɵɵtemplate(3, ProductDetailPage_ion_badge_3_Template, 2, 1, \"ion-badge\", 3);\n            i0.ɵɵpipe(4, \"async\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"ion-button\", 4);\n            i0.ɵɵlistener(\"click\", function ProductDetailPage_Template_ion_button_click_5_listener() {\n              return ctx.goToCatalog();\n            });\n            i0.ɵɵelement(6, \"ion-icon\", 5);\n            i0.ɵɵtext(7, \" Volver \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"ion-content\", 6);\n            i0.ɵɵtemplate(9, ProductDetailPage_div_9_Template, 4, 0, \"div\", 7)(10, ProductDetailPage_ion_grid_10_Template, 30, 16, \"ion-grid\", 8)(11, ProductDetailPage_div_11_Template, 6, 1, \"div\", 9)(12, ProductDetailPage_div_12_Template, 2, 0, \"div\", 10);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"backButton\", true);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 6, ctx.cartItemCount$));\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.product);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.relatedProducts.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.product);\n          }\n        },\n        dependencies: [i6.NgForOf, i6.NgIf, i5.IonBadge, i5.IonButton, i5.IonCol, i5.IonContent, i5.IonGrid, i5.IonIcon, i5.IonImg, i5.IonRow, i5.IonSpinner, i5.RouterLinkDelegate, i7.ProductCardComponent, i8.AppHeaderComponent, i9.EmptyStateComponent, i1.RouterLink, i6.AsyncPipe, i6.CurrencyPipe],\n        styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%]; (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap var __webpack_modules__ = ({387: (() => {throw new Error('Module build failed (from ./node_modules/sass-loader/dist/cjs.js):nexpected \\\"{\\\".n    \\\\2577n147 \\\\2502      order: -1; // Move before main imagern    \\\\2502               ^n    \\\\2575n  src\\\\\\\\app\\\\\\\\pages\\\\\\\\product-detail\\\\\\\\product-detail.page.scss 147:14  root stylesheet');})}); // startup // Load entry module and return exports // This entry module doesn\\\"t tell about it\\\"s top-level declarations so it can't be inlined\\nvar __webpack_exports__ = {}; __webpack_modules__[387](); resource = __webpack_exports__;})() ;{}\"]\n      });\n    }\n  }\n  return ProductDetailPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}