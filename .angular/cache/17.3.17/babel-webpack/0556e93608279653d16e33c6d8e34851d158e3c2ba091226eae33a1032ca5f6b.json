{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/juand/OneDrive/Escritorio/Grupo Merpes/prueba-fullstack-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport { AppValidators } from '../../shared/utils/validators.util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../core/services/auth.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"../../core/services/notification.service\";\nimport * as i5 from \"@angular/common\";\nfunction LoginPage_div_9_div_11_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Correo requerido\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginPage_div_9_div_11_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Correo inv\\u00E1lido\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginPage_div_9_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, LoginPage_div_9_div_11_span_1_Template, 2, 0, \"span\", 21)(2, LoginPage_div_9_div_11_span_2_Template, 2, 0, \"span\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_2_0;\n    let tmp_3_0;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r1.loginForm.get(\"email\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_3_0 = ctx_r1.loginForm.get(\"email\")) == null ? null : tmp_3_0.errors == null ? null : tmp_3_0.errors[\"email\"]);\n  }\n}\nfunction LoginPage_div_9_div_16_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Contrase\\u00F1a requerida\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginPage_div_9_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, LoginPage_div_9_div_16_span_1_Template, 2, 0, \"span\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_2_0;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r1.loginForm.get(\"password\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"required\"]);\n  }\n}\nfunction LoginPage_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"h2\");\n    i0.ɵɵtext(3, \"\\u00A1Hola de nuevo!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Bienvenido, te extra\\u00F1amos.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginPage_div_9_Template_form_ngSubmit_6_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onLogin());\n    });\n    i0.ɵɵelementStart(7, \"div\", 11)(8, \"ion-item\", 12);\n    i0.ɵɵelement(9, \"ion-icon\", 13)(10, \"ion-input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, LoginPage_div_9_div_11_Template, 3, 2, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 11)(13, \"ion-item\", 12);\n    i0.ɵɵelement(14, \"ion-icon\", 16)(15, \"ion-input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, LoginPage_div_9_div_16_Template, 2, 1, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 18)(18, \"a\");\n    i0.ɵɵtext(19, \"\\u00BFOlvidaste tu contrase\\u00F1a?\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"ion-button\", 19);\n    i0.ɵɵtext(21, \" Iniciar Sesi\\u00F3n \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    let tmp_2_0;\n    let tmp_3_0;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.loginForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r1.loginForm.get(\"email\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx_r1.loginForm.get(\"email\")) == null ? null : tmp_2_0.invalid));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx_r1.loginForm.get(\"password\")) == null ? null : tmp_3_0.touched) && ((tmp_3_0 = ctx_r1.loginForm.get(\"password\")) == null ? null : tmp_3_0.invalid));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.loginForm.valid);\n  }\n}\nfunction LoginPage_div_10_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"span\");\n    i0.ɵɵtext(2, \"Requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginPage_div_10_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"span\");\n    i0.ɵɵtext(2, \"Correo inv\\u00E1lido o requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginPage_div_10_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"span\");\n    i0.ɵɵtext(2, \"M\\u00EDnimo 6 caracteres\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginPage_div_10_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"span\");\n    i0.ɵɵtext(2, \"Las contrase\\u00F1as no coinciden\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginPage_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 9)(2, \"h2\");\n    i0.ɵɵtext(3, \"Crear Cuenta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Comienza tu viaje con nosotros.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginPage_div_10_Template_form_ngSubmit_6_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onRegister());\n    });\n    i0.ɵɵelementStart(7, \"div\", 11)(8, \"ion-item\", 12);\n    i0.ɵɵelement(9, \"ion-icon\", 23)(10, \"ion-input\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, LoginPage_div_10_div_11_Template, 3, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 11)(13, \"ion-item\", 12);\n    i0.ɵɵelement(14, \"ion-icon\", 13)(15, \"ion-input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, LoginPage_div_10_div_16_Template, 3, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 11)(18, \"ion-item\", 12);\n    i0.ɵɵelement(19, \"ion-icon\", 16)(20, \"ion-input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(21, LoginPage_div_10_div_21_Template, 3, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 11)(23, \"ion-item\", 12);\n    i0.ɵɵelement(24, \"ion-icon\", 25)(25, \"ion-input\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(26, LoginPage_div_10_div_26_Template, 3, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"ion-button\", 19);\n    i0.ɵɵtext(28, \" Registrarse \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    let tmp_2_0;\n    let tmp_3_0;\n    let tmp_4_0;\n    let tmp_5_0;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.registerForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r1.registerForm.get(\"name\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx_r1.registerForm.get(\"name\")) == null ? null : tmp_2_0.invalid));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx_r1.registerForm.get(\"email\")) == null ? null : tmp_3_0.touched) && ((tmp_3_0 = ctx_r1.registerForm.get(\"email\")) == null ? null : tmp_3_0.invalid));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx_r1.registerForm.get(\"password\")) == null ? null : tmp_4_0.touched) && ((tmp_4_0 = ctx_r1.registerForm.get(\"password\")) == null ? null : tmp_4_0.invalid));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.registerForm.hasError(\"passwordMismatch\") && ((tmp_5_0 = ctx_r1.registerForm.get(\"confirmPassword\")) == null ? null : tmp_5_0.touched));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.registerForm.valid);\n  }\n}\nexport let LoginPage = /*#__PURE__*/(() => {\n  class LoginPage {\n    constructor(fb, auth, nav, notify, loadingCtrl) {\n      this.fb = fb;\n      this.auth = auth;\n      this.nav = nav;\n      this.notify = notify;\n      this.loadingCtrl = loadingCtrl;\n      this.isLoginMode = true;\n      // Login Form\n      this.loginForm = this.fb.group({\n        email: ['', [Validators.required, Validators.email]],\n        password: ['', [Validators.required, Validators.minLength(6)]]\n      });\n      // Register Form\n      this.registerForm = this.fb.group({\n        name: ['', Validators.required],\n        email: ['', [Validators.required, Validators.email]],\n        password: ['', [Validators.required, Validators.minLength(6)]],\n        confirmPassword: ['', [Validators.required]]\n      }, {\n        validators: AppValidators.passwordMatch('password', 'confirmPassword')\n      });\n    }\n    switchMode(isLogin) {\n      this.isLoginMode = isLogin;\n    }\n    onLogin() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (_this.loginForm.valid) {\n          const loading = yield _this.loadingCtrl.create({\n            message: 'Bienvenido...'\n          });\n          yield loading.present();\n          const {\n            email,\n            password\n          } = _this.loginForm.value;\n          _this.auth.login(email, password).subscribe({\n            next: () => {\n              loading.dismiss();\n              _this.notify.showSuccess('Sesión iniciada correctamente');\n              _this.nav.navigateRoot('/catalog');\n            },\n            error: err => {\n              loading.dismiss();\n              _this.notify.showError('Credenciales inválidas');\n            }\n          });\n        }\n      })();\n    }\n    onRegister() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.registerForm.valid) {\n          const loading = yield _this2.loadingCtrl.create({\n            message: 'Registrando...'\n          });\n          yield loading.present();\n          const {\n            name,\n            email,\n            password\n          } = _this2.registerForm.value;\n          _this2.auth.register(name, email, password).subscribe({\n            next: () => {\n              loading.dismiss();\n              _this2.notify.showSuccess('Cuenta creada. ¡Bienvenido!');\n              _this2.nav.navigateRoot('/catalog');\n            },\n            error: err => {\n              loading.dismiss();\n              _this2.notify.showError('Error al crear cuenta: ' + err);\n            }\n          });\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function LoginPage_Factory(t) {\n        return new (t || LoginPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.NavController), i0.ɵɵdirectiveInject(i4.NotificationService), i0.ɵɵdirectiveInject(i3.LoadingController));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginPage,\n        selectors: [[\"app-login\"]],\n        decls: 11,\n        vars: 8,\n        consts: [[1, \"auth-content\"], [1, \"auth-container\"], [1, \"auth-card\", \"fade-in\"], [1, \"auth-toggle\"], [1, \"toggle-bg\"], [1, \"toggle-btn\", 3, \"click\"], [\"class\", \"form-section slide-in-left\", 4, \"ngIf\"], [\"class\", \"form-section slide-in-right\", 4, \"ngIf\"], [1, \"form-section\", \"slide-in-left\"], [1, \"header-section\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"input-group\"], [\"lines\", \"none\", 1, \"custom-item\"], [\"name\", \"mail-outline\", \"slot\", \"start\", \"color\", \"medium\"], [\"formControlName\", \"email\", \"type\", \"email\", \"placeholder\", \"Correo electr\\u00F3nico\"], [\"class\", \"error-msg\", 4, \"ngIf\"], [\"name\", \"lock-closed-outline\", \"slot\", \"start\", \"color\", \"medium\"], [\"formControlName\", \"password\", \"type\", \"password\", \"placeholder\", \"Contrase\\u00F1a\"], [1, \"forgot-pass\"], [\"expand\", \"block\", \"type\", \"submit\", 1, \"main-btn\", 3, \"disabled\"], [1, \"error-msg\"], [4, \"ngIf\"], [1, \"form-section\", \"slide-in-right\"], [\"name\", \"person-outline\", \"slot\", \"start\", \"color\", \"medium\"], [\"formControlName\", \"name\", \"type\", \"text\", \"placeholder\", \"Nombre completo\"], [\"name\", \"shield-checkmark-outline\", \"slot\", \"start\", \"color\", \"medium\"], [\"formControlName\", \"confirmPassword\", \"type\", \"password\", \"placeholder\", \"Confirmar contrase\\u00F1a\"]],\n        template: function LoginPage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"ion-content\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n            i0.ɵɵelement(4, \"div\", 4);\n            i0.ɵɵelementStart(5, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function LoginPage_Template_button_click_5_listener() {\n              return ctx.switchMode(true);\n            });\n            i0.ɵɵtext(6, \"Ingresar\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function LoginPage_Template_button_click_7_listener() {\n              return ctx.switchMode(false);\n            });\n            i0.ɵɵtext(8, \"Registro\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(9, LoginPage_div_9_Template, 22, 4, \"div\", 6)(10, LoginPage_div_10_Template, 29, 6, \"div\", 7);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"right\", !ctx.isLoginMode);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.isLoginMode);\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"active\", !ctx.isLoginMode);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoginMode);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoginMode);\n          }\n        },\n        dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.IonButton, i3.IonContent, i3.IonIcon, i3.IonInput, i3.IonItem, i3.TextValueAccessor],\n        styles: [\".auth-content[_ngcontent-%COMP%]{--background: #f4f5f8}.auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100%;padding:20px}.auth-card[_ngcontent-%COMP%]{background:#fff;width:100%;max-width:380px;border-radius:30px;box-shadow:0 14px 28px #0000000d,0 10px 10px #00000005;padding:30px;position:relative;overflow:hidden}.auth-toggle[_ngcontent-%COMP%]{background:#f1f2f6;border-radius:20px;padding:5px;display:flex;position:relative;margin-bottom:30px}.toggle-btn[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;padding:10px;z-index:2;font-family:Poppins,sans-serif;font-weight:600;color:#7f8fa6;transition:color .3s;cursor:pointer}.toggle-btn.active[_ngcontent-%COMP%]{color:#fff}.toggle-bg[_ngcontent-%COMP%]{position:absolute;top:5px;left:5px;width:calc(50% - 5px);height:calc(100% - 10px);background:linear-gradient(90deg,#6c5ce7,#a29bfe);border-radius:15px;transition:transform .3s cubic-bezier(.68,-.55,.27,1.55);z-index:1;box-shadow:0 4px 10px #6c5ce74d}.toggle-bg.right[_ngcontent-%COMP%]{transform:translate(100%)}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:700;color:#2d3436;margin:0 0 5px}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;color:#b2bec3;margin-bottom:25px;font-size:.9rem}.input-group[_ngcontent-%COMP%]{margin-bottom:15px}.custom-item[_ngcontent-%COMP%]{--background: #f8f9fa;--border-radius: 12px;border-radius:12px;--min-height: 50px}.custom-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:10px}ion-input[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:.95rem;--placeholder-color: #a4b0be}.error-msg[_ngcontent-%COMP%]{color:#ff7675;font-size:.75rem;margin-top:4px;margin-left:10px;font-weight:500}.main-btn[_ngcontent-%COMP%]{--background: linear-gradient(90deg, #6c5ce7 0%, #a29bfe 100%);--border-radius: 14px;font-family:Poppins,sans-serif;font-weight:600;min-height:52px;margin-top:20px;box-shadow:0 5px 15px #6c5ce733}.forgot-pass[_ngcontent-%COMP%]{text-align:right;margin-top:5px}.forgot-pass[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8rem;color:#a29bfe;text-decoration:none}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.slide-in-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInLeft .4s ease-out}.slide-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .4s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}\"]\n      });\n    }\n  }\n  return LoginPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}