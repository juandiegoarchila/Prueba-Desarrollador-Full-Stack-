{"ast":null,"code":"import { getStars } from '../../shared/utils/rating.util';\nimport { getDiscountPercent } from '../../shared/utils/price.util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../core/services/product.service\";\nimport * as i3 from \"../../core/services/cart.service\";\nimport * as i4 from \"../../core/services/notification.service\";\nimport * as i5 from \"@ionic/angular\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../shared/components/app-header/app-header.component\";\nimport * as i8 from \"../../shared/components/empty-state/empty-state.component\";\nfunction ProductDetailPage_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"ion-spinner\", 6);\n    i0.ɵɵelementStart(2, \"p\", 7);\n    i0.ɵɵtext(3, \"Cargando producto...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailPage_div_3_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" -\", ctx_r1.discountPercent, \"% \");\n  }\n}\nfunction ProductDetailPage_div_3_div_6_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function ProductDetailPage_div_3_div_6_button_1_Template_button_click_0_listener() {\n      const image_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.setImage(image_r4));\n    });\n    i0.ɵɵelement(1, \"ion-img\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const image_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"active\", image_r4 === ctx_r1.selectedImage);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", image_r4)(\"alt\", ctx_r1.product.name);\n  }\n}\nfunction ProductDetailPage_div_3_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtemplate(1, ProductDetailPage_div_3_div_6_button_1_Template, 2, 4, \"button\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.imageList);\n  }\n}\nfunction ProductDetailPage_div_3_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind4(2, 1, ctx_r1.product.previousPrice, \"COP\", \"symbol\", \"1.0-0\"), \" \");\n  }\n}\nfunction ProductDetailPage_div_3_div_17_ion_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 34);\n  }\n  if (rf & 2) {\n    const star_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"name\", star_r5);\n  }\n}\nfunction ProductDetailPage_div_3_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtemplate(1, ProductDetailPage_div_3_div_17_ion_icon_1_Template, 1, 1, \"ion-icon\", 32);\n    i0.ɵɵelementStart(2, \"span\", 33);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"number\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.getStars(ctx_r1.product.rating));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(4, 2, ctx_r1.product.rating, \"1.1-1\"));\n  }\n}\nfunction ProductDetailPage_div_3_ion_card_23_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\");\n    i0.ɵɵelement(1, \"ion-icon\", 37);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const feature_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(feature_r6);\n  }\n}\nfunction ProductDetailPage_div_3_ion_card_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 10)(1, \"ion-card-content\")(2, \"div\", 21)(3, \"h3\");\n    i0.ɵɵtext(4, \"Caracter\\u00EDsticas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-list\", 35);\n    i0.ɵɵtemplate(6, ProductDetailPage_div_3_ion_card_23_ion_item_6_Template, 4, 1, \"ion-item\", 36);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.product.features);\n  }\n}\nfunction ProductDetailPage_div_3_ion_card_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 10)(1, \"ion-card-content\")(2, \"div\", 21)(3, \"h3\");\n    i0.ɵɵtext(4, \"Condiciones de garant\\u00EDa\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 22);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.product.warranty);\n  }\n}\nfunction ProductDetailPage_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"ion-card\", 10)(3, \"div\", 11);\n    i0.ɵɵelement(4, \"ion-img\", 12);\n    i0.ɵɵtemplate(5, ProductDetailPage_div_3_div_5_Template, 2, 1, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ProductDetailPage_div_3_div_6_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 15)(8, \"ion-card\", 10)(9, \"ion-card-content\")(10, \"h2\", 16);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 17)(13, \"span\", 18);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, ProductDetailPage_div_3_span_16_Template, 3, 6, \"span\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, ProductDetailPage_div_3_div_17_Template, 5, 5, \"div\", 20);\n    i0.ɵɵelementStart(18, \"div\", 21)(19, \"h3\");\n    i0.ɵɵtext(20, \"Descripci\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\", 22);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(23, ProductDetailPage_div_3_ion_card_23_Template, 7, 1, \"ion-card\", 23)(24, ProductDetailPage_div_3_ion_card_24_Template, 7, 1, \"ion-card\", 23);\n    i0.ɵɵelementStart(25, \"ion-button\", 24);\n    i0.ɵɵlistener(\"click\", function ProductDetailPage_div_3_Template_ion_button_click_25_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.addToCart());\n    });\n    i0.ɵɵelement(26, \"ion-icon\", 25);\n    i0.ɵɵtext(27, \" Agregar al carrito \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r1.selectedImage)(\"alt\", ctx_r1.product.name);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.discountPercent);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.imageList.length > 1);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(15, 11, ctx_r1.product.price, \"COP\", \"symbol\", \"1.0-0\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.previousPrice);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.rating);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.description);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.features == null ? null : ctx_r1.product.features.length);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.warranty);\n  }\n}\nfunction ProductDetailPage_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-empty-state\", 38);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ProductDetailPage = /*#__PURE__*/(() => {\n  class ProductDetailPage {\n    constructor(route, productService, cartService, notify, nav) {\n      this.route = route;\n      this.productService = productService;\n      this.cartService = cartService;\n      this.notify = notify;\n      this.nav = nav;\n      this.product = null;\n      this.isLoading = true;\n      this.discountPercent = null;\n      this.imageList = [];\n      this.selectedImage = '';\n      this.getStars = getStars;\n    }\n    ngOnInit() {\n      const productId = Number(this.route.snapshot.paramMap.get('id'));\n      if (!productId) {\n        this.isLoading = false;\n        return;\n      }\n      this.productService.getProductById(productId).subscribe({\n        next: product => {\n          this.product = product;\n          this.discountPercent = product ? getDiscountPercent(product.price, product.previousPrice) : null;\n          this.imageList = product?.images?.length ? product.images : product ? [product.imageUrl] : [];\n          this.selectedImage = this.imageList[0] ?? '';\n          this.isLoading = false;\n        },\n        error: () => {\n          this.isLoading = false;\n        }\n      });\n    }\n    setImage(image) {\n      this.selectedImage = image;\n    }\n    addToCart() {\n      if (!this.product) {\n        return;\n      }\n      this.cartService.addToCart(this.product);\n      this.notify.showSuccess(`Agregaste ${this.product.name} al carrito`);\n      this.nav.navigateForward('/cart');\n    }\n    static {\n      this.ɵfac = function ProductDetailPage_Factory(t) {\n        return new (t || ProductDetailPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.CartService), i0.ɵɵdirectiveInject(i4.NotificationService), i0.ɵɵdirectiveInject(i5.NavController));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProductDetailPage,\n        selectors: [[\"app-product-detail\"]],\n        decls: 5,\n        vars: 4,\n        consts: [[\"title\", \"Detalle\", 3, \"backButton\"], [\"color\", \"light\", 1, \"ion-padding\"], [\"class\", \"centered-loader\", 4, \"ngIf\"], [\"class\", \"detail-container\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"centered-loader\"], [\"name\", \"crescent\", \"color\", \"primary\"], [1, \"text-medium\", \"ion-margin-top\"], [1, \"detail-container\"], [1, \"detail-grid\"], [1, \"detail-card\"], [1, \"detail-image\"], [3, \"src\", \"alt\"], [\"class\", \"discount-badge\", 4, \"ngIf\"], [\"class\", \"thumbnail-row\", 4, \"ngIf\"], [1, \"detail-stack\"], [1, \"detail-title\"], [1, \"price-row\"], [1, \"current-price\"], [\"class\", \"previous-price\", 4, \"ngIf\"], [\"class\", \"rating-row\", 4, \"ngIf\"], [1, \"detail-section\"], [1, \"detail-description\"], [\"class\", \"detail-card\", 4, \"ngIf\"], [\"expand\", \"block\", \"shape\", \"round\", \"color\", \"primary\", 1, \"add-btn\", 3, \"click\"], [\"name\", \"cart-outline\", \"slot\", \"start\"], [1, \"discount-badge\"], [1, \"thumbnail-row\"], [\"type\", \"button\", \"class\", \"thumbnail-button\", 3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"thumbnail-button\", 3, \"click\"], [1, \"previous-price\"], [1, \"rating-row\"], [\"class\", \"rating-star\", 3, \"name\", 4, \"ngFor\", \"ngForOf\"], [1, \"rating-value\"], [1, \"rating-star\", 3, \"name\"], [1, \"detail-list\"], [4, \"ngFor\", \"ngForOf\"], [\"name\", \"checkmark-circle-outline\", \"slot\", \"start\", \"color\", \"success\"], [\"title\", \"Producto no encontrado\", \"description\", \"No fue posible cargar el detalle del producto.\", \"icon\", \"alert-circle-outline\"]],\n        template: function ProductDetailPage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-header\", 0);\n            i0.ɵɵelementStart(1, \"ion-content\", 1);\n            i0.ɵɵtemplate(2, ProductDetailPage_div_2_Template, 4, 0, \"div\", 2)(3, ProductDetailPage_div_3_Template, 28, 16, \"div\", 3)(4, ProductDetailPage_div_4_Template, 2, 0, \"div\", 4);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"backButton\", true);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.product);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.product);\n          }\n        },\n        dependencies: [i6.NgForOf, i6.NgIf, i5.IonButton, i5.IonCard, i5.IonCardContent, i5.IonContent, i5.IonIcon, i5.IonImg, i5.IonItem, i5.IonLabel, i5.IonList, i5.IonSpinner, i7.AppHeaderComponent, i8.EmptyStateComponent, i6.DecimalPipe, i6.CurrencyPipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return ProductDetailPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}