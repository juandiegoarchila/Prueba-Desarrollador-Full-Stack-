{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/juand/OneDrive/Escritorio/Grupo Merpes/prueba-fullstack-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { from } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { collection, addDoc, query, where, getDocs, initializeFirestore } from 'firebase/firestore';\nimport { initializeApp } from 'firebase/app';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nexport let FirebaseOrderRepository = /*#__PURE__*/(() => {\n  class FirebaseOrderRepository {\n    constructor() {\n      const app = initializeApp(environment.firebase);\n      // Configurar Firestore para ignorar propiedades undefined\n      this.db = initializeFirestore(app, {\n        ignoreUndefinedProperties: true\n      });\n    }\n    createOrder(order) {\n      const ordersCol = collection(this.db, 'orders');\n      return from(addDoc(ordersCol, order)).pipe(map(() => {\n        order.status = 'synced'; // Mark as synced if successful\n        return order;\n      }));\n    }\n    getOrders(userId) {\n      const ordersCol = collection(this.db, 'orders');\n      const q = query(ordersCol, where('userId', '==', userId));\n      return from(getDocs(q).then(snapshot => {\n        return snapshot.docs.map(doc => doc.data());\n      }));\n    }\n    updateStatus(orderId, status) {\n      return _asyncToGenerator(function* () {\n        // In firebase we might update the doc, but for now we assume createOrder handles it or we implement doc update later\n        // This is primarily for local sync status\n        return Promise.resolve();\n      })();\n    }\n    static {\n      this.ɵfac = function FirebaseOrderRepository_Factory(t) {\n        return new (t || FirebaseOrderRepository)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: FirebaseOrderRepository,\n        factory: FirebaseOrderRepository.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return FirebaseOrderRepository;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}