{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/juand/OneDrive/Escritorio/Grupo Merpes/prueba-fullstack-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Observable } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../storage/storage.service\";\nexport let LocalOrderRepository = /*#__PURE__*/(() => {\n  class LocalOrderRepository {\n    constructor(storage) {\n      this.storage = storage;\n      this.ORDERS_KEY = 'local_orders';\n    }\n    createOrder(order) {\n      var _this = this;\n      return new Observable(observer => {\n        const run = /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* () {\n            try {\n              const orders = yield _this.storage.get(_this.ORDERS_KEY);\n              const currentOrders = orders || [];\n              currentOrders.push(order);\n              yield _this.storage.set(_this.ORDERS_KEY, currentOrders);\n              observer.next(order);\n              observer.complete();\n            } catch (err) {\n              observer.error(err);\n            }\n          });\n          return function run() {\n            return _ref.apply(this, arguments);\n          };\n        }();\n        run();\n      });\n    }\n    getOrders(userId) {\n      var _this2 = this;\n      return new Observable(observer => {\n        const run = /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator(function* () {\n            try {\n              const orders = yield _this2.storage.get(_this2.ORDERS_KEY);\n              const userOrders = (orders || []).filter(o => o.userId === userId);\n              observer.next(userOrders);\n              observer.complete();\n            } catch (err) {\n              observer.error(err);\n            }\n          });\n          return function run() {\n            return _ref2.apply(this, arguments);\n          };\n        }();\n        run();\n      });\n    }\n    updateStatus(orderId, status) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const orders = (yield _this3.storage.get(_this3.ORDERS_KEY)) || [];\n        const orderIndex = orders.findIndex(o => o.id === orderId);\n        if (orderIndex > -1) {\n          orders[orderIndex].status = status;\n          yield _this3.storage.set(_this3.ORDERS_KEY, orders);\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function LocalOrderRepository_Factory(t) {\n        return new (t || LocalOrderRepository)(i0.ɵɵinject(i1.StorageService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: LocalOrderRepository,\n        factory: LocalOrderRepository.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return LocalOrderRepository;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}